---
# Only the main Sass file needs front matter (the dashes are enough)
---
@charset "utf-8";

//====== Imports
@import "normalize";
@import "base";
@import "algolia";


//====== Functions
@function str-replace($string, $search, $replace: '') {
    $index: str-index($string, $search);
    @if $index {
        @return str-slice($string, 1, $index - 1) + $replace +
        str-replace(str-slice($string, $index +
        str-length($search)), $search, $replace);
    }
    @return $string;
}

//Optimizing SVG in data-uris:
//via codepen: http://codepen.io/Tigt/post/optimizing-svgs-in-data-uris
//Optimize your svg here first: https://jakearchibald.github.io/svgomg/
@function svg-url($svg){
    //
    // Chunk up string in order to avoid
    // "SystemStackError: stack level too deep"
    //
    $encoded:'';
    $slice: 2000;
    $index: 0;
    $loops: ceil(str-length($svg)/$slice);
    @for $i from 1 through $loops {
        $chunk: str-slice($svg, $index, $index + $slice - 1);
        $chunk: str-replace($chunk,'"','\'');
        $chunk: str-replace($chunk,'<','%3C');
        $chunk: str-replace($chunk,'>','%3E');
        $chunk: str-replace($chunk,'&','%26');
        $chunk: str-replace($chunk,'#','%23');
        $encoded: #{$encoded}#{$chunk};
        $index: $index + $slice;
    }
    @return url("data:image/svg+xml;charset=utf8,#{$encoded}");
}

//====== Content Styles
.algolia__logo {
    max-width: 60px;
    align-self: center;
    margin-top: 10px;
    margin-left: 10px;
    opacity: 1;
    transition: opacity 0.1s ease-in-out;

    opacity: 0.7;

    img {
        width: 100%;
    }
}

.algolia__search-content--active {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}

.algolia__results {
    width: 100%;
}

.wrapper {
    display: flex;
    align-items: flex-start;
    max-width: $content-width;
    margin: 0 auto;
    font-size: $small-font-size;
}

.content {
    flex: 1 1 300px;
    background-color: $background-color;
}

.content__next {
    text-align: right;
}

.content__pagination {
    display: flex;
    justify-content: space-between;
    background-color: #ffffff;
    padding-top: 20px;
}

.content__permalink {
    position: relative;
    display: block;

    &:hover::after {
        content: '';
        position: absolute;
        top: 0;
        top: 50%;
        transform: translateY(-50%);
        left: -19px;
        width: 12px;
        height: 12px;
        background: svg-url('<svg width="12px" height="12px" version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 12 12" enable-background="new 0 0 12 12" xml:space="preserve"><g><path fill="#1A2E3B" d="M5,3H3C1.343,3,0,4.343,0,6s1.343,3,3,3c0.276,0,0.5-0.224,0.5-0.5S3.276,8,3,8C1.897,8,1,7.103,1,6s0.897-2,2-2h2 c1.103,0,2,0.897,2,2c0,0.276,0.224,0.5,0.5,0.5S8,6.276,8,6C8,4.343,6.657,3,5,3z"/><path d="M9,3C8.724,3,8.5,3.224,8.5,3.5S8.724,4,9,4c1.103,0,2,0.897,2,2s-0.897,2-2,2H7C5.897,8,5,7.103,5,6 c0-0.276-0.224-0.5-0.5-0.5S4,5.724,4,6c0,1.657,1.343,3,3,3h2c1.657,0,3-1.343,3-3S10.657,3,9,3z"/></g></svg>');
    }
}

.content__post {
    margin-top: -28px;
    padding-left: 72px;
    padding-right: 72px;
    padding-top: 92px;
    padding-bottom: 40px;
    max-width: 500px;

    > ol {
        margin-bottom: 24px;

        li + li {
            margin-top: 8px;
        }
    }
}

.content__table {
    margin-top: 24px;

    ul {
        padding: 0;
        margin: 0;
    }

    li {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    td {
        vertical-align: top;
    }
}

.content_table--duo {
    li + li {
        margin-top: 15px;
    }

    td {
        width: 40%;

        &:first-of-type {
            padding-right: 10px;
        }

        &:last-of-type {
            padding-left: 10px;
        }
    }
}

table:not(.content__table){
    border: 1px solid;
    border-collapse: collapse;

    td {
        border: 1px solid;
        padding: 4px;
    }
}

.rail {
    flex: 0 0 185px;
    margin-right: $content-gutter;
    min-height: 500px;
}

.rail__content {
    position: fixed;
}

.rail__header {
    text-align: center;
    margin-top: 63px;
    margin-bottom: 40px;
}

.footer_wrapper {
    margin: 0 auto;
    padding: $content-gutter;
    max-width: $content-width;
    width: 100%;
    font-size: $small-font-size;
}

.nav {
    margin: 0;
    padding: 0;

    a {
        text-decoration: none;
        color: #657987;
        transition: color 0.1s ease-in-out;

        &:hover {
            color: darken(#657987, 20%)
        }
    }
}

.nav__item {
    list-style-type: none;
    margin: 0;
    padding: 0;

    & + & {
        margin-top: 8px;
    }

    a.current {
        font-weight: 700;
    }
}
